"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2829],{2829:(I,d,o)=>{o.r(d),o.d(d,{OfficialDepartmentsPageModule:()=>y});var m=o(6895),h=o(433),r=o(8434),u=o(1407),g=o(1491),O=o(5698),e=o(8256);function D(t,s){if(1&t&&(e.\u0275\u0275elementStart(0,"ion-card"),e.\u0275\u0275element(1,"ion-card-content",3),e.\u0275\u0275elementEnd()),2&t){const n=s.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("innerHTML",n.content,e.\u0275\u0275sanitizeHtml)}}const E=[{path:"",component:(()=>{class t{constructor(n,c,i){this.api=n,this.sqLite=c,this.renderer=i,this.officialDepartments=[]}ngOnInit(){}ionViewDidEnter(){this.getApiData()}getApiData(n=!1){this.api.get("/official-departments").subscribe(i=>{this.officialDepartments=i.data.officialDepartments;let l,a=document.querySelectorAll("a");0===a.length&&(l=setInterval(()=>{a=document.querySelectorAll("a"),a.length>0&&(this.hrefFunctions(),clearInterval(l))},500)),this.sqLite.db.executeSql("SELECT * FROM api_content WHERE api_path = ?",["official-departments"]).then(f=>{f.rows.length>1||f.rows.length<1?this.sqLite.db.executeSql("DELETE FROM api_content WHERE api_path = ?",["official-departments"]).then(()=>{this.sqLite.db.executeSql("INSERT INTO api_content (api_path, api_data) VALUES(?,?)",["official-departments",JSON.stringify(this.officialDepartments)]).then(()=>{}).catch(p=>console.log("#insert dberror: "+JSON.stringify(p)))}).catch(p=>console.log("#delete dberror: "+JSON.stringify(p))):this.sqLite.db.executeSql("UPDATE api_content SET api_data = ? WHERE api_path = ?",[JSON.stringify(this.officialDepartments),"official-departments"]).then(()=>{}).catch(p=>console.log("#update dberror: "+JSON.stringify(p)))}).catch(f=>{console.log("#select dberror: "+JSON.stringify(f))})},i=>{console.log(i),this.sqLite.db.executeSql("SELECT * FROM api_content WHERE api_path = ?",["official-departments"]).then(a=>{for(let l=0;l<a.rows.length;l++)this.officialDepartments=JSON.parse(a.rows.item(l).api_data)}).catch(a=>console.log("#select error: "+JSON.stringify(a)))})}hrefFunctions(){const n=document.querySelectorAll("a");for(let c=0;c<n.length;c++){let i;this.renderer.listen(n.item(c),"click",a=>{if(i=a.target,typeof i.href>"u"&&a.path.forEach((l,f)=>{typeof l.href<"u"&&(i=l)}),-1===i.href.indexOf("mailto:")&&-1===i.href.indexOf("tel:"))return this.api.openUrl(i.href),!1})}}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(g.s),e.\u0275\u0275directiveInject(O.F),e.\u0275\u0275directiveInject(e.Renderer2))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-official-departments"]],decls:8,vars:2,consts:[[3,"translucent"],["slot","start"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(n,c){1&n&&(e.\u0275\u0275elementStart(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.\u0275\u0275element(3,"ion-menu-button"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"ion-title"),e.\u0275\u0275text(5,"Gemeinde Abteilungen"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(6,"ion-content"),e.\u0275\u0275template(7,D,2,1,"ion-card",2),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275property("translucent",!0),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",c.officialDepartments))},dependencies:[m.NgForOf,r.IonButtons,r.IonCard,r.IonCardContent,r.IonContent,r.IonHeader,r.IonMenuButton,r.IonTitle,r.IonToolbar]}),t})()}];let S=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[u.Bz.forChild(E),u.Bz]}),t})(),y=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[m.CommonModule,h.FormsModule,r.IonicModule,S]}),t})()}}]);